<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Console Check</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #fff3cd;
        }
        .alert {
            background: #fff;
            padding: 20px;
            border-left: 5px solid #ff6b6b;
            margin: 20px 0;
        }
        h1 { color: #d32f2f; }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>‚ö†Ô∏è Instructions de Diagnostic</h1>

    <div class="alert">
        <h2>√âtape 1 : Ouvrir la Console</h2>
        <p>Appuyez sur <strong>F12</strong> pour ouvrir les Outils de D√©veloppement</p>
        <p>Ou clic droit ‚Üí "Inspecter" ‚Üí Onglet "Console"</p>
    </div>

    <div class="alert">
        <h2>√âtape 2 : Regarder les Erreurs</h2>
        <p>Dans la Console, cherchez des messages en <span style="color: red;">ROUGE</span></p>
        <p>Les erreurs peuvent ressembler √† :</p>
        <ul>
            <li><code>Failed to load resource</code></li>
            <li><code>CORS policy</code></li>
            <li><code>Content Security Policy</code></li>
            <li><code>Mixed Content</code></li>
            <li><code>net::ERR_</code></li>
        </ul>
    </div>

    <div class="alert">
        <h2>√âtape 3 : Test Image</h2>
        <p>Voici une image de test :</p>
        <img src="/images/tutorials/docker-security.svg" alt="Test" style="max-width: 400px; border: 2px solid red;">
        <p id="result">‚è≥ Chargement...</p>
    </div>

    <div class="alert">
        <h2>√âtape 4 : Onglet R√©seau</h2>
        <p>Allez dans l'onglet <strong>"R√©seau"</strong> (Network) des DevTools</p>
        <p>Actualisez la page (F5)</p>
        <p>Cherchez <code>docker-security.svg</code> dans la liste</p>
        <p>Cliquez dessus et regardez :</p>
        <ul>
            <li><strong>Status</strong> : Doit √™tre <span style="color: green;">200</span></li>
            <li><strong>Type</strong> : Doit √™tre <code>image/svg+xml</code></li>
            <li><strong>Preview</strong> : Doit montrer l'image</li>
        </ul>
    </div>

    <script>
        const img = document.querySelector('img');
        const result = document.getElementById('result');

        img.onload = function() {
            result.innerHTML = '<span style="color: green; font-weight: bold;">‚úÖ IMAGE CHARG√âE ! Dimensions: ' + img.naturalWidth + 'x' + img.naturalHeight + '</span>';
            console.log('‚úÖ Image charg√©e avec succ√®s');
            console.log('Dimensions:', img.naturalWidth, 'x', img.naturalHeight);
        };

        img.onerror = function(e) {
            result.innerHTML = '<span style="color: red; font-weight: bold;">‚ùå ERREUR DE CHARGEMENT</span>';
            console.error('‚ùå Erreur de chargement de l\'image');
            console.error('Event:', e);
            console.error('Image src:', img.src);
            console.error('Image complete:', img.complete);
        };

        // Logs suppl√©mentaires
        console.log('='.repeat(50));
        console.log('üîç DIAGNOSTIC IMAGE');
        console.log('='.repeat(50));
        console.log('URL de la page:', window.location.href);
        console.log('Protocole:', window.location.protocol);
        console.log('User Agent:', navigator.userAgent);
        console.log('Cookies enabled:', navigator.cookieEnabled);

        // Tester fetch direct
        fetch('/images/tutorials/docker-security.svg')
            .then(response => {
                console.log('‚úÖ Fetch r√©ussi');
                console.log('Status:', response.status);
                console.log('Content-Type:', response.headers.get('Content-Type'));
                return response.text();
            })
            .then(text => {
                console.log('‚úÖ SVG r√©cup√©r√©, longueur:', text.length);
                console.log('D√©but du SVG:', text.substring(0, 100));
            })
            .catch(error => {
                console.error('‚ùå Fetch √©chou√©:', error);
            });
    </script>
</body>
</html>
